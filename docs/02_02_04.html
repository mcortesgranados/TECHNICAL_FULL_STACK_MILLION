<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>ExplicaciÃ³n TÃ©cnica: CommentsController</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background-color: #f9f9f9;
      padding: 20px;
      line-height: 1.6;
    }
    .card {
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      padding: 20px;
      margin-bottom: 20px;
    }
    h2 {
      color: #333;
    }
    .emoji {
      font-size: 1.3em;
      margin-right: 6px;
    }
    code {
      background-color: #f4f4f4;
      padding: 2px 6px;
      border-radius: 4px;
    }
  </style>
</head>
<body>

  <div class="card">
    <h2>\TECHNICAL_FULL_STACK_MILLION\DOT_NET\POC\POC_001_HelloWorldREST\POC_001_HelloWorldREST\Controllers\CommentsController.cs</h2>
    <h2><a href="https://github.com/mcortesgranados/TECHNICAL_FULL_STACK_MILLION/commit/0344bf06902f43026681cd1b27e4643648d76b31" target="_blank">ENLACE GITHUB</a></h2>
    <h2><span class="emoji">ğŸ”Œ</span>Imports y Dependencias</h2>
    <ul>
      <li><code>using Microsoft.AspNetCore.Mvc;</code> <span class="emoji">ğŸŒ</span> Framework para servicios web RESTful</li>
      <li><code>using MongoDB.Driver;</code> <span class="emoji">ğŸ§¬</span> Cliente oficial de MongoDB para .NET</li>
      <li><code>using POC_001_HelloWorldREST.Models;</code> <span class="emoji">ğŸ§±</span> Modelos de datos, incluyendo <code>Comment</code></li>
      <li><code>using POC_001_HelloWorldREST.Services;</code> <span class="emoji">ğŸ› ï¸</span> Servicios como <code>MongoDbService</code></li>
      <li><code>using System;</code> <span class="emoji">âš™ï¸</span> Tipos base de .NET (excepciones, fechas, etc.)</li>
      <li><code>using System.Collections.Generic;</code> <span class="emoji">ğŸ“š</span> Soporte para listas genÃ©ricas</li>
      <li><code>using System.Threading.Tasks;</code> <span class="emoji">â±ï¸</span> ProgramaciÃ³n asincrÃ³nica con <code>Task</code></li>
    </ul>
</div>

  <div class="card">
    <h2><span class="emoji">ğŸ§­</span>Controlador: <code>CommentsController</code></h2>
    <p>Es un controlador API que maneja solicitudes HTTP en la ruta base <code>api/comments</code>. Permite obtener los primeros 20 comentarios desde MongoDB.</p>
  </div>

  <div class="card">
    <h2><span class="emoji">ğŸ“¥</span>InyecciÃ³n de Dependencias</h2>
    <p>El constructor recibe una instancia de <code>MongoDbService</code> mediante inyecciÃ³n de dependencias (DI), facilitando pruebas, mantenimiento y separaciÃ³n de responsabilidades.</p>
  </div>

  <div class="card">
    <h2><span class="emoji">ğŸ“¡</span>Endpoint HTTP GET</h2>
    <p>El mÃ©todo <code>GetFirst20Comments()</code> responde a solicitudes GET, devuelve una lista de objetos <code>Comment</code> obtenida desde la base de datos:</p>
    <ul>
      <li><span class="emoji">âœ…</span> <strong>HTTP 200 OK</strong> con la lista si la operaciÃ³n es exitosa</li>
      <li><span class="emoji">â—</span> <strong>HTTP 500</strong> con mensaje contextual si ocurre una excepciÃ³n</li>
    </ul>
  </div>

  <div class="card">
    <h2><span class="emoji">ğŸ”</span>Manejo de Excepciones</h2>
    <p>El bloque <code>try-catch</code> distingue entre errores de MongoDB y errores inesperados:</p>
    <ul>
      <li><code>MongoException</code> o <code>TimeoutException</code>: Retorna un error personalizado indicando problemas con la base de datos.</li>
      <li>Otros errores: Mensaje de error genÃ©rico, pero con detalles tÃ©cnicos en <code>error</code>.</li>
    </ul>
  </div>

  <div class="card">
    <h2><span class="emoji">ğŸ§ </span>AplicaciÃ³n de Principios SOLID</h2>
    <ul>
      <li><strong>SRP</strong> (Responsabilidad Ãšnica) <span class="emoji">âœ”ï¸</span>: El controlador solo gestiona solicitudes HTTP relacionadas con comentarios.</li>
      <li><strong>O</strong> (Abierto/Cerrado) <span class="emoji">â•</span>: FÃ¡cil de extender con nuevos endpoints sin modificar los existentes.</li>
      <li><strong>D</strong> (InversiÃ³n de Dependencias) <span class="emoji">ğŸ”</span>: Usa <code>MongoDbService</code> como dependencia externa inyectada.</li>
    </ul>
  </div>

  <div class="card">
    <h2><span class="emoji">ğŸ”</span>Resumen</h2>
    <p><code>CommentsController</code> es un ejemplo bien estructurado de controlador RESTful en ASP.NET Core que sigue buenas prÃ¡cticas de diseÃ±o y arquitectura limpia. EstÃ¡ orientado a servicios asincrÃ³nicos y a la separaciÃ³n clara entre la lÃ³gica de presentaciÃ³n (API) y de persistencia (servicio).</p>
  </div>

  <footer style="text-align:center; margin-top: 40px; color: #777;">
    ğŸ“… Generado el 2025-05-01
  </footer>

</body>
</html>
